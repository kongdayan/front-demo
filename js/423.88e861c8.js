"use strict";(globalThis["webpackChunkwesharelab_web"]=globalThis["webpackChunkwesharelab_web"]||[]).push([[423],{3004:(e,t,a)=>{a.d(t,{Z:()=>c});var s=a(9981),i=a.n(s),n=a(4328);a(1249);const o=i().create({timeout:1e4,maxContentLength:4e3});o.interceptors.request.use((e=>(localStorage.getItem("accessToken")&&(e.headers.Authorization=localStorage.getItem("accessToken")),e.withCredentials=!1,e)),(e=>{n.Z.create({message:e.message}),Promise.reject(e)})),o.interceptors.response.use((e=>{console.log("一切正常");const t=e.data;return"[]"===t?[]:t}),(async e=>{if(console.log("出现错误"),console.log(e),401===e.response.status){console.log("出现授权错误"),n.Z.create({message:"Token is invalid or expired"});let e={data:401};return e}return Promise.reject(e)}),(e=>{}));const r=o,l="http://demo.wesharetechnology.com:8000/lab/",c={login:async e=>await r.post(`${l}login`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),verifyAccessToken:async e=>await r.post(`${l}api/token/verify/`,e,{}).then((e=>e)).catch((e=>e)),refreshAccessToken:async e=>await r.post(`${l}api/token/refresh/`,e,{}).then((e=>e)).catch((e=>e)),register:async e=>await r.post(`${l}register`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getsummary:async e=>await r.get(`${l}summary`,{params:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getvessel:async e=>await r.get(`${l}vessel`,{data:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getxtray:async e=>await r.get(`${l}xtray`,{data:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getnotice:async()=>await r.get(`${l}notice`,{}).then((e=>e)).catch((e=>e)),addvessel:async e=>await r.post(`${l}vessel`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getpeople:async()=>await r.get(`${l}people`,{}).then((e=>e)).catch((e=>e)),getnotes:async e=>await r.get(`${l}note?user_id=`+e.user_id,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),deletenote:async e=>await r["delete"](`${l}note?noteid=`+e.noteid,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),newnote:async e=>await r.post(`${l}note`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),updatenote:async e=>await r.put(`${l}note?noteid=`+e.noteid,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),vesselActionHistory:async e=>await r.get(`${l}vessel/`+e+"/action/",{}).then((e=>e)).catch((e=>e)),getTemporarySecretKey:async()=>await r.get("127.0.0.0:8181/index/").then((e=>e)).catch((e=>e))}},2423:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Q});var s=a(9835),i=a(6970);const n={class:"q-pa-md q-col-gutter-y-md"},o={key:0,style:{"text-align":"center"}},r={key:1,class:"q-col-gutter-sm row justify-between"},l={class:"col-lg-6 col-md-6 col-xs-12"},c={class:"text-h5 text-weight-bold"},h=(0,s._)("span",{class:"text-weight-bold"},"ID: ",-1),d=(0,s._)("span",{class:"text-weight-bold"},"Brand: ",-1),g=(0,s._)("span",{class:"text-weight-bold"},"CAS: ",-1),p=(0,s._)("span",{class:"text-weight-bold"},"Purchase Date: ",-1),y=(0,s._)("span",{class:"text-weight-bold"},"Position: ",-1),m=(0,s._)("div",{id:"DetailChart",class:"q-col-gutter-sm row justify-between",style:{width:"80%rpx",height:"300px"}},null,-1),u={key:2,class:"q-col-gutter-md row justify-between"},w={class:"col-lg-12 col-md-12 col-xs-12"},v=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("div",{class:"q-pa-md text-h5 text-weight-bold"},"History")]),(0,s._)("tr",null,[(0,s._)("th",{class:"text-left"},"Timestamp"),(0,s._)("th",{class:"text-left"},"Weight"),(0,s._)("th",{class:"test-left"},"Action type")])],-1),_={class:"text-left"},f={class:"text-left"},D={class:"text-left"};function x(e,t,a,x,b,k){const T=(0,s.up)("q-spinner-dots"),C=(0,s.up)("q-card"),H=(0,s.up)("q-card-section"),S=(0,s.up)("q-markup-table"),A=(0,s.up)("q-scroll-area");return(0,s.wg)(),(0,s.iD)("div",n,[void 0===b.material?((0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(T,{color:"primary",size:"5em"})])):(0,s.kq)("",!0),b.material?((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",l,[(0,s.Wm)(C,{class:"q-pa-sm",bordered:""},{default:(0,s.w5)((()=>[(0,s._)("div",c,(0,i.zw)(b.material.chemical_name),1),(0,s._)("div",null,[h,(0,s.Uk)("#"+(0,i.zw)(b.material.vessel_id),1)]),(0,s._)("div",null,[d,(0,s.Uk)((0,i.zw)(b.material.brand_name),1)]),(0,s._)("div",null,[g,(0,s.Uk)((0,i.zw)(b.material.cas),1)]),(0,s._)("div",null,[p,(0,s.Uk)((0,i.zw)(b.material.purchase_datetime),1)]),(0,s._)("div",null,[y,(0,s.Uk)((0,i.zw)(b.material.xtray_id),1)])])),_:1})])])):(0,s.kq)("",!0),(0,s._)("div",null,[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[m])),_:1})])),_:1})]),b.material?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",w,[(0,s.Wm)(A,{style:{height:"500px","max-width":"100%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{bordered:""},{default:(0,s.w5)((()=>[v,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.vesselActionHistory,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{key:t,clickable:""},[(0,s._)("td",_,(0,i.zw)(e[2]),1),(0,s._)("td",f,(0,i.zw)(e[0]),1),(0,s._)("td",D,(0,i.zw)(e[1]),1)])))),128))])])),_:1})])),_:1})])])):(0,s.kq)("",!0)])}a(9665);a(8171);var b=a(1639);a(1957);const k={name:"TimesliceSlider",data(){return{chartDayNum:void 0}},computed:{timelineLen(){return this.$store.state.materialHistory.timeline.length}},watch:{chartDayNum(e){this.$store.commit("materialHistory/setTimeslice",{timeslice:e})}},mounted(){this.chartDayNum=this.$store.state.materialHistory.timeslice}};var T=a(4458),C=a(7691),H=a(8423),S=a(9984),A=a.n(S);A()(k,"components",{QCard:T.Z,QChip:C.Z,QSlider:H.Z});var $=a(3004);let q=a(2555);a(9466),a(8186),a(1335),a(984),a(3771);const j={name:"DetailPage",props:{vessel_id:{type:String,default:""}},data(){return{material:void 0,vesselActionHistory:[],graphSeries:[],historyDates:this.getdiffdate("2020-06-30","2021-07-27"),grapthLegend:["vessel"],graphOption:[]}},methods:{draw(e){document.getElementById(e);let t=q.init(document.getElementById(e));t.clear(),this.graphOption=this.generateOption(),t.setOption(this.graphOption)},gethistoryWeightdata(){var e=JSON.parse(localStorage.getItem("historyWeightdata"));return e},generateOption(){var e="";this.graphSeries=[];let t=this.gethistoryWeightdata();for(var a in console.log("临时数据"),console.log(t),t)a==this.vessel_id&&this.graphSeries.push({name:"vessel",type:"line",step:"end",data:t[a]});return e={title:{text:"Daily weight record"},tooltip:{trigger:"axis"},legend:{data:this.grapthLegend},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",data:this.historyDates},yAxis:{type:"value"},series:this.graphSeries},e},getdiffdate(e,t){var a=new Array,s=0;while(new Date(e)<=new Date(t)){a[s]=e;var i=new Date(e).getTime(),n=i+864e5,o=new Date(n).getFullYear()+"/",r=new Date(n).getMonth()+1<10?"0"+(new Date(n).getMonth()+1)+"/":new Date(n).getMonth()+1+"/",l=new Date(n).getDate()<10?"0"+new Date(n).getDate():new Date(n).getDate();e=o+r+l,s++}return a},updateHistoryDates(e,t){},fetchData(){this.material=this.getVesseldata(this.vessel_id),this.vesselHistory=this.getVesselHisorydata(this.vessel_id),this.draw("DetailChart")},getVesseldata(e){var t=JSON.parse(localStorage.getItem("vesselData"));for(var a in t)if(t[a]["vessel_id"]==e)return t[a]},getVesselHisorydata(e){var t=JSON.parse(localStorage.getItem("historyWeightdata"));for(var a in t)if(a==e)return t[a];return t},async fetchVesselActionHistory(e){const t=await $.Z.vesselActionHistory(e);let a=t.data;return a},async fetchVesselActionHistoryHandler(){this.vesselActionHistory=await this.fetchVesselActionHistory(this.vessel_id)}},mounted(){console.log("vessel_id = ",this.vessel_id),this.fetchData(),this.fetchVesselActionHistoryHandler()}};var Z=a(7501),z=a(3190),W=a(6663),I=a(6933);const O=(0,b.Z)(j,[["render",x]]),Q=O;A()(j,"components",{QSpinnerDots:Z.Z,QCard:T.Z,QCardSection:z.Z,QScrollArea:W.Z,QMarkupTable:I.Z})}}]);