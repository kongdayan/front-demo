(globalThis["webpackChunkwesharelab_web"]=globalThis["webpackChunkwesharelab_web"]||[]).push([[703],{3004:(e,s,a)=>{"use strict";a.d(s,{Z:()=>c});var t=a(9981),o=a.n(t),n=a(4328);a(1249);const l=o().create({timeout:1e4,maxContentLength:4e3});l.interceptors.request.use((e=>(localStorage.getItem("accessToken")&&(e.headers.Authorization=localStorage.getItem("accessToken")),e.withCredentials=!1,e)),(e=>{n.Z.create({message:e.message}),Promise.reject(e)})),l.interceptors.response.use((e=>{console.log("一切正常");const s=e.data;return"[]"===s?[]:s}),(async e=>{if(console.log("出现错误"),console.log(e),401===e.response.status){console.log("出现授权错误"),n.Z.create({message:"Token is invalid or expired"});let e={data:401};return e}return Promise.reject(e)}),(e=>{}));const r=l,i="http://demo.wesharetechnology.com:8000/lab/",c={login:async e=>await r.post(`${i}login`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),verifyAccessToken:async e=>await r.post(`${i}api/token/verify/`,e,{}).then((e=>e)).catch((e=>e)),refreshAccessToken:async e=>await r.post(`${i}api/token/refresh/`,e,{}).then((e=>e)).catch((e=>e)),register:async e=>await r.post(`${i}register`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getsummary:async e=>await r.get(`${i}summary`,{params:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getvessel:async e=>await r.get(`${i}vessel`,{data:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getxtray:async e=>await r.get(`${i}xtray`,{data:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getnotice:async()=>await r.get(`${i}notice`,{}).then((e=>e)).catch((e=>e)),addvessel:async e=>await r.post(`${i}vessel`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getpeople:async()=>await r.get(`${i}people`,{}).then((e=>e)).catch((e=>e)),getnotes:async e=>await r.get(`${i}note?user_id=`+e.user_id,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),deletenote:async e=>await r["delete"](`${i}note?noteid=`+e.noteid,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),newnote:async e=>await r.post(`${i}note`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),updatenote:async e=>await r.put(`${i}note?noteid=`+e.noteid,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),vesselActionHistory:async e=>await r.get(`${i}vessel/`+e+"/action/",{}).then((e=>e)).catch((e=>e)),getTemporarySecretKey:async()=>await r.get("127.0.0.0:8181/index/").then((e=>e)).catch((e=>e))}},2703:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>Z});var t=a(9835),o=a(6970);const n={class:"container"},l=(0,t._)("div",{class:"title"},[(0,t._)("h3",null,"WeShare")],-1),r={class:"submit-btn"},i={class:"submit-btn"};function c(e,s,a,c,p,d){const m=(0,t.up)("q-tab"),u=(0,t.up)("q-tabs"),g=(0,t.up)("q-input"),h=(0,t.up)("q-icon"),w=(0,t.up)("q-btn"),y=(0,t.up)("q-form"),b=(0,t.up)("q-tab-panel"),f=(0,t.up)("q-tab-panels"),T=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",{class:"page",style:(0,o.j5)({backgroundImage:"url("+p.bgimagesrc+")"})},[(0,t._)("div",n,[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[l,(0,t.Wm)(u,{modelValue:p.tab,"onUpdate:modelValue":s[0]||(s[0]=e=>p.tab=e),dense:"",class:"bg-grey-3 text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{name:"login",label:"login"}),(0,t.Wm)(m,{name:"register",label:"register"})])),_:1},8,["modelValue"]),(0,t.Wm)(f,{modelValue:p.tab,"onUpdate:modelValue":s[8]||(s[8]=e=>p.tab=e),animated:"",class:"text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{name:"login"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{class:"submit-form",method:"post",onSubmit:d.loginSubmit},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:p.username,"onUpdate:modelValue":s[1]||(s[1]=e=>p.username=e),name:"username",label:"Username",filled:"",rules:[e=>e&&e.length>0||"Please type your username"]},null,8,["modelValue","rules"]),(0,t.Wm)(g,{modelValue:p.password,"onUpdate:modelValue":s[3]||(s[3]=e=>p.password=e),name:"password",label:"Password",filled:"",type:p.isPwd?"password":"text",rules:[e=>e&&e.length>0||"Please type your password"]},{append:(0,t.w5)((()=>[(0,t.Wm)(h,{name:p.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[2]||(s[2]=e=>p.isPwd=!p.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,t._)("div",r,[(0,t.Wm)(w,{label:"Login",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1}),(0,t.Wm)(b,{name:"register"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{class:"submit-form",method:"post",onSubmit:d.registerSubmit},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:p.username,"onUpdate:modelValue":s[4]||(s[4]=e=>p.username=e),name:"username",label:"Username",filled:"",rules:[e=>e&&e.length>0||"Please type your username"]},null,8,["modelValue","rules"]),(0,t.Wm)(g,{modelValue:p.password,"onUpdate:modelValue":s[5]||(s[5]=e=>p.password=e),name:"password",label:"Password",filled:"",type:p.isPwd?"password":"text",rules:[e=>e&&e.length>0||"Please type your password"]},null,8,["modelValue","type","rules"]),(0,t.Wm)(g,{modelValue:p.repeatpassword,"onUpdate:modelValue":s[7]||(s[7]=e=>p.repeatpassword=e),name:"repeatpassword",label:"Repeat Password",filled:"",type:p.isPwd?"password":"text",rules:[e=>e&&e.length>0||"Please repeat your password"]},{append:(0,t.w5)((()=>[(0,t.Wm)(h,{name:p.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[6]||(s[6]=e=>p.isPwd=!p.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,t._)("div",i,[(0,t.Wm)(w,{class:"submit-btn",label:"Register",type:"submit",color:"positive"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])],4)}a(9665);var p=a(3004),d=a(3100),m=a(4328);const u={name:"LoginPage",data(){return{tab:"login",username:"",password:"",repeatpassword:"",isPwd:!0,bgimagesrc:a(5078)}},components:{},methods:{...(0,d.OI)(["changeAccessToken","changeRefreshToken"]),loginSubmit(e){console.log("run submit"),this.loginvaild(this.username,this.password)},registerSubmit(e){this.password!=this.repeatpassword?(m.Z.create({message:"You two input passwords do not match"}),console.log("密码不一致")):this.registervaild(this.username,this.password)},async loginvaild(e,s){console.log(e,s);let a={username:this.username,password:this.password};const t=await p.Z.login(a);200==t.code?(console.log("sucessful login"),console.log(t.accessToken),console.log(t.refreshToken),this.changeAccessToken({accessToken:"Bearer "+t.accessToken}),this.changeRefreshToken({refreshToken:t.refreshToken}),this.$router.push("/")):403==t.code&&(m.Z.create({message:t.message}),console.log(t.message))},async registervaild(e,s){let a={username:this.username,password1:this.password,password2:this.repeatpassword};const t=await p.Z.register(a);if(console.log(t),200==t.code)m.Z.create({message:"Registration complete"}),console.log("注册成功，正在跳转"),this.$router.push("/");else{for(let e=0,s=t.message.length;e<s;e++)m.Z.create({message:t.message[e]});console.log("Something Wrong")}}}};var g=a(1639),h=a(4458),w=a(7817),y=a(7661),b=a(9800),f=a(4106),T=a(8326),v=a(3119),k=a(2857),P=a(9379),V=a(9984),W=a.n(V);const _=(0,g.Z)(u,[["render",c]]),Z=_;W()(u,"components",{QCard:h.Z,QTabs:w.Z,QTab:y.Z,QTabPanels:b.Z,QTabPanel:f.Z,QForm:T.Z,QInput:v.Z,QIcon:k.Z,QBtn:P.Z})},5078:(e,s,a)=>{e.exports=a.p+"img/bg.c7021907.jpg"}}]);