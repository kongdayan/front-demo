(globalThis["webpackChunkwesharelab_web"]=globalThis["webpackChunkwesharelab_web"]||[]).push([[627],{3004:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var a=s(9981),i=s.n(a),o=s(4328);s(1249);const n=i().create({timeout:1e4,maxContentLength:4e3});n.interceptors.request.use((e=>(localStorage.getItem("accessToken")&&(e.headers.Authorization=localStorage.getItem("accessToken")),e.withCredentials=!1,e)),(e=>{o.Z.create({message:e.message}),Promise.reject(e)})),n.interceptors.response.use((e=>{console.log("一切正常");const t=e.data;return"[]"===t?[]:t}),(async e=>{if(console.log("出现错误"),console.log(e),401===e.response.status){console.log("出现授权错误"),o.Z.create({message:"Token is invalid or expired"});let e={data:401};return e}return Promise.reject(e)}),(e=>{}));const r=n,l="http://demo.wesharetechnology.com:8000/lab/",c={login:async e=>await r.post(`${l}login`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),verifyAccessToken:async e=>await r.post(`${l}api/token/verify/`,e,{}).then((e=>e)).catch((e=>e)),refreshAccessToken:async e=>await r.post(`${l}api/token/refresh/`,e,{}).then((e=>e)).catch((e=>e)),register:async e=>await r.post(`${l}register`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getsummary:async e=>await r.get(`${l}summary`,{params:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getvessel:async e=>await r.get(`${l}vessel`,{data:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getxtray:async e=>await r.get(`${l}xtray`,{data:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getnotice:async()=>await r.get(`${l}notice`,{}).then((e=>e)).catch((e=>e)),addvessel:async e=>await r.post(`${l}vessel`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getpeople:async()=>await r.get(`${l}people`,{}).then((e=>e)).catch((e=>e)),getnotes:async e=>await r.get(`${l}note?user_id=`+e.user_id,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),deletenote:async e=>await r["delete"](`${l}note?noteid=`+e.noteid,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),newnote:async e=>await r.post(`${l}note`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),updatenote:async e=>await r.put(`${l}note?noteid=`+e.noteid,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),vesselActionHistory:async e=>await r.get(`${l}vessel/`+e+"/action/",{}).then((e=>e)).catch((e=>e)),getTemporarySecretKey:async()=>await r.get("127.0.0.0:8181/index/").then((e=>e)).catch((e=>e))}},1627:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var a=s(9835),i=s(6970);const o={key:0,class:"q-pa-md q-col-gutter-y-md"},n={class:"q-col-gutter-sm row justify-between"},r={class:"col-lg-12 col-md-12 col-xs-12"},l={class:"text-h5 text-weight-bold"},c={class:"q-col-gutter-sm row justify-between"},d=(0,a._)("span",{class:"text-weight-bold"},"Name: ",-1),u={style:{"white-space":"nowrap"}},h=(0,a._)("span",{class:"text-weight-bold"},"ID: ",-1),_={class:"text-weight-bold"},p=(0,a.Uk)("Title: "),g={key:0},m={key:1},w=(0,a._)("div",null,[(0,a._)("span",{class:"text-weight-bold"},"Status: "),(0,a.Uk)("active")],-1),y={class:"q-pa-md text-h5 text-weight-bold"},A=(0,a.Uk)(" Notes "),f=(0,a._)("tr",null,[(0,a._)("th",{class:"text-left"},"Title"),(0,a._)("th",{class:"text-left"},"Action")],-1),v={class:"text-left"},b={class:"text-left"},x={class:"q-col-gutter-sm row justify-between"},C={class:"col-lg-6 col-md-6 col-xs-12"},k=(0,a._)("div",{class:"text-h6 text-weight-bold"},"Top Use",-1),T={class:"col-lg-6 col-md-6 col-xs-12"},U=(0,a._)("div",{class:"text-h6 text-weight-bold"},"Activity",-1),N=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("div",{class:"q-pa-md text-h5 text-weight-bold"},"History")]),(0,a._)("tr",null,[(0,a._)("th",{class:"text-left"},"Timestamp"),(0,a._)("th",{class:"text-left"},"Material Name"),(0,a._)("th",{class:"text-left"},"Weight"),(0,a._)("th",{class:"text-left"},"Action")])],-1),D={class:"text-left"},q={class:"text-left"},Y={class:"text-left"},Z={class:"text-left"};function j(e,t,s,j,R,S){const Q=(0,a.up)("q-card"),W=(0,a.up)("q-btn"),I=(0,a.up)("q-item-section"),H=(0,a.up)("q-item"),z=(0,a.up)("q-list"),E=(0,a.up)("q-menu"),M=(0,a.up)("q-markup-table"),B=(0,a.Q2)("close-popup");return R.loaded?((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",n,[(0,a._)("div",r,[(0,a.Wm)(Q,{class:"q-pa-sm",bordered:""},{default:(0,a.w5)((()=>[(0,a._)("div",l,(0,i.zw)(R.user_info.username),1),(0,a._)("div",c,[(0,a._)("div",null,[d,(0,a._)("span",u,(0,i.zw)(R.user_info.username),1)]),(0,a._)("div",null,[h,(0,a.Uk)((0,i.zw)(R.user_info.user_id),1)]),(0,a._)("div",null,[(0,a._)("span",_,[p,R.user_info.is_superuser?((0,a.wg)(),(0,a.iD)("div",g,"Admin")):((0,a.wg)(),(0,a.iD)("div",m,"General"))])]),w])])),_:1})])]),(0,a._)("div",null,[(0,a.Wm)(M,{bordered:""},{default:(0,a.w5)((()=>[(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("div",y,[A,(0,a.Wm)(W,{color:"primary",label:"New",push:"",onClick:S.onAddnote},null,8,["onClick"])])]),f]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(R.notes,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t,clickable:""},[(0,a._)("td",v,(0,i.zw)(e[1]),1),(0,a._)("td",b,[(0,a.Wm)(W,{flat:"",color:"primary",icon:"more_horiz"},{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Wm)(z,null,{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(H,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W,{color:"primary",label:"Edit",onClick:t=>S.onEditaction(e)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)),[[B]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(H,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W,{color:"red",label:"Delete",onClick:t=>S.onDeleteaction(e)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)),[[B]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])])))),128))])])),_:1})]),(0,a._)("div",x,[(0,a._)("div",C,[(0,a.Wm)(Q,{class:"q-pa-sm",bordered:""},{default:(0,a.w5)((()=>[k])),_:1})]),(0,a._)("div",T,[(0,a.Wm)(Q,{class:"q-pa-sm",bordered:""},{default:(0,a.w5)((()=>[U])),_:1})])]),(0,a._)("div",null,[(0,a.Wm)(M,{bordered:""},{default:(0,a.w5)((()=>[N,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(R.user_info.History,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t,clickable:""},[(0,a._)("td",D,(0,i.zw)(e.Timestamp),1),(0,a._)("td",q,(0,i.zw)(e.Name),1),(0,a._)("td",Y,(0,i.zw)(Math.abs(e.Weight)),1),(0,a._)("td",Z,(0,i.zw)(),1)])))),128))])])),_:1})])])):(0,a.kq)("",!0)}s(9665);s(8171);var R=s(1639);var S=s(3004);const Q={name:"ProfilePage",data(){return{user_info:{},user_id:this.$route.params.user_id,people:void 0,editorIcon:s(5249),notes:Object,showeditor:!1,loaded:!0,selected_note_id:"",userdata:"",editorNote:"",editorNoteTitle:"",editorSign:"",editorLegacynoteTitle:""}},methods:{onAddnote(){console.log("Add new note"),this.editorSign="Create",this.$router.push({name:"AddNote",params:{user_id:this.user_id,isNew:!0,title:"",content:""}})},async getNotes(){let e;console.log("get notes"),console.log(this.user_id),1==this.user_id?(console.log("test"),e={code:200,message:"Request successful",data:[[1,"ss","ssr","2021-09-28"]]}):e=2==this.user_id?{code:200,message:"Request successful",data:[[3,"teest","","2023-08-04"]]}:{code:200,message:"Request successful",data:[[4,"test2023_8_04","","2023-08-04"],[5,"testtest","","2023-08-04"]]},console.log(e),this.notes=e.data,this.showeditor=!1,this.loaded=!0},async fetchUserHistory(){const e=await S.Z.uesrHistory();console.log("user history",e);for(var t=0;t<e.length;t++)e[t].Usercardid===this.uId&&(this.userInfo=e[t]);this.loaded=!0,console.log("userInfo=",this.userInfo)},async addNote(e){const t=await S.Z.newnote(e);console.log(t),this.getNotes()},async deleteNote(e){const t=await S.Z.deletenote(e);console.log(t),await this.getNotes()},fetchUserHistoryHandler(){this.fetchUserHistory(this.uId)},onEditaction(e){this.editorNote=e[2],this.editorNoteTitle=e[1],this.editorLegacynoteTitle=e[1],this.editorSign="Update",this.$router.push({name:"AddNote",params:{user_id:this.user_id,note_id:e[0],title:this.editorNoteTitle,content:this.editorNote,isNew:!1}}),console.log("Title: "+this.editorNoteTitle),console.log("Content: "+this.editorNote),console.log("TimeStamp: "+e[3])},onDeleteaction(e){console.log(e);var t={noteid:e[0]};console.log(t.noteid),this.deleteNote(t)},async fetchUser(){const e={code:200,message:"Get all user information",data:[{user_id:1,username:"weshare",is_superuser:!0,is_active:!0},{user_id:2,username:"Nathan",is_superuser:!0,is_active:!0},{user_id:3,username:"kong",is_superuser:!0,is_active:!0},{user_id:4,username:"zhaoying",is_superuser:!1,is_active:!0},{user_id:5,username:"chenyapeng",is_superuser:!1,is_active:!0},{user_id:6,username:"Ray_LIU",is_superuser:!1,is_active:!0},{user_id:7,username:"Ryan_LAU",is_superuser:!0,is_active:!0},{user_id:9,username:"Samuel_LAW",is_superuser:!0,is_active:!0},{user_id:10,username:"Josef",is_superuser:!0,is_active:!0},{user_id:11,username:"Yiran_WU",is_superuser:!0,is_active:!0},{user_id:12,username:"Amber_Li",is_superuser:!0,is_active:!0},{user_id:13,username:"mbasif",is_superuser:!1,is_active:!0},{user_id:14,username:"wzhangbx",is_superuser:!1,is_active:!0},{user_id:15,username:"Sun",is_superuser:!1,is_active:!0},{user_id:16,username:"Kenji_SHUM",is_superuser:!1,is_active:!0},{user_id:17,username:"haha",is_superuser:!1,is_active:!0},{user_id:18,username:"Joe_LU",is_superuser:!0,is_active:!0},{user_id:19,username:"Yiqi_AN",is_superuser:!0,is_active:!0},{user_id:20,username:"张如山",is_superuser:!1,is_active:!0}]};this.people=e.data,console.log(this.people),this.user_info=this.people[this.user_id-1]}},mounted(){console.log("mounted"),console.log("user_info=",this.user_info),this.getNotes()},created(){console.log("create"),this.fetchUser()}};var W=s(4458),I=s(6933),H=s(9379),z=s(6362),E=s(3246),M=s(490),B=s(1233),F=s(2146),L=s(9984),P=s.n(L);const K=(0,R.Z)(Q,[["render",j]]),O=K;P()(Q,"components",{QCard:W.Z,QMarkupTable:I.Z,QBtn:H.Z,QMenu:z.Z,QList:E.Z,QItem:M.Z,QItemSection:B.Z}),P()(Q,"directives",{ClosePopup:F.Z})},5249:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADAklEQVRYR+2VTUhUURiG3++qJZHda5l3RmgRBNWiIGxR0aKgH4miFmVY9ANKBi2EnDuSEBkUwZxrRQsjA8GK1JE2Cf1A+1q0Ndpnzhki544kCdr9YkbvMDPeO84fuPFsZgbOfO9znvOdcwgrPGiF87EKUHYDvkD8DohPJbeWaUya6t1c21xWgMXwnoxApp5cEGUD8HfGj7PCH5ILB24R01oQL8DkgCgLgD9oXWfG00QWAe0RofUnvmcY8YAoGUA3rG4C7qdpb5ZCG3V+LwdREoBuxDoI9NjRnFIOeEHMVM6rmyce0V8HsGgA3bDaCHi+oJ1uR4R6L6sJUxD1gT+7FfoXBni7Ys/vnOyt+14SgG5MtRCU18n+Yrs7am584KocaCabplnhQQA6gC9SaPvTT0nBBnyGdQ5AOFmEEJQhTWSf80wTNAtwNUDjFVTV9DO0bqJogPRwYu6MmLUPvS6ZLIjPUqgH3ObmbSA9nJk6oqb6xCtc75raRbaSsLSDgE8RoR31mpsXQKZ2uiFDap9XwYabsT22QmEQtoHxXpraiZKu4gztaZeMW1F/0NrLnOyPrQC9lUI9vdxzn9NAhnZwa1TUDnhqD8b3EdthgLYAeCOFdna58MWb031ahnbQFSnUF57au6YP2jaPANwAwrAMaS35hHsCZDXcxaipJs+82/AFYodANAKgHkwvpalezjc8F8BXAI1gnJemtnDmXYYesI4QYRjAJgADUmithYS7AtR1z/gr5+YmFwuNSqE1uzacEW9icCJcZaA/KrT2QsNdAfydViMrSBhwxhII3Zg+SWQPgbEe4AEpagteuVN8ySlIFoc9BuAdAOcMpyAagrEzNtMQgGowDUpTvVrMyj0B/IZ1jYFnBBqKCPWCz7DY2Q4QwmAkwisZ9Coq1EulhLtuQeoOZ/RBoXFm3kCA89olYMiBKzXcFaDB+H3MRsXHHMU9G7MYoCU9UBf8VVPFa9oYOAzwLIMnFCg/Ep+wK8Zlb823YoK8/pPXY1TOwOxaqwArbuA/i10+MDo5yVgAAAAASUVORK5CYII="}}]);