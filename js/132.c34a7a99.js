"use strict";(globalThis["webpackChunkwesharelab_web"]=globalThis["webpackChunkwesharelab_web"]||[]).push([[132],{3004:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(9981),n=a.n(o),i=a(4328);a(1249);const s=n().create({timeout:1e4,maxContentLength:4e3});s.interceptors.request.use((e=>(localStorage.getItem("accessToken")&&(e.headers.Authorization=localStorage.getItem("accessToken")),e.withCredentials=!1,e)),(e=>{i.Z.create({message:e.message}),Promise.reject(e)})),s.interceptors.response.use((e=>{console.log("一切正常");const t=e.data;return"[]"===t?[]:t}),(async e=>{if(console.log("出现错误"),console.log(e),401===e.response.status){console.log("出现授权错误"),i.Z.create({message:"Token is invalid or expired"});let e={data:401};return e}return Promise.reject(e)}),(e=>{}));const l=s,c="http://demo.wesharetechnology.com:8000/lab/",r={login:async e=>await l.post(`${c}login`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),verifyAccessToken:async e=>await l.post(`${c}api/token/verify/`,e,{}).then((e=>e)).catch((e=>e)),refreshAccessToken:async e=>await l.post(`${c}api/token/refresh/`,e,{}).then((e=>e)).catch((e=>e)),register:async e=>await l.post(`${c}register`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getsummary:async e=>await l.get(`${c}summary`,{params:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getvessel:async e=>await l.get(`${c}vessel`,{data:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getxtray:async e=>await l.get(`${c}xtray`,{data:e},{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getnotice:async()=>await l.get(`${c}notice`,{}).then((e=>e)).catch((e=>e)),addvessel:async e=>await l.post(`${c}vessel`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),getpeople:async()=>await l.get(`${c}people`,{}).then((e=>e)).catch((e=>e)),getnotes:async e=>await l.get(`${c}note?user_id=`+e.user_id,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),deletenote:async e=>await l["delete"](`${c}note?noteid=`+e.noteid,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),newnote:async e=>await l.post(`${c}note`,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),updatenote:async e=>await l.put(`${c}note?noteid=`+e.noteid,e,{headers:{"Content-Type":"application/json"}}).then((e=>e)).catch((e=>e)),vesselActionHistory:async e=>await l.get(`${c}vessel/`+e+"/action/",{}).then((e=>e)).catch((e=>e)),getTemporarySecretKey:async()=>await l.get("127.0.0.0:8181/index/").then((e=>e)).catch((e=>e))}},132:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var o=a(9835),n=a(6970);const i=(0,o.Uk)(" Menu "),s=(0,o.Uk)(" WeShareLab Front Page "),l=(0,o.Uk)(" Notifications "),c=(0,o.Uk)(" People "),r=(0,o.Uk)(" Logout ");function p(e,t,a,p,u,d){const h=(0,o.up)("q-tooltip"),w=(0,o.up)("q-route-tab"),g=(0,o.up)("q-separator"),m=(0,o.up)("q-badge"),f=(0,o.up)("q-tabs"),k=(0,o.up)("q-toolbar"),b=(0,o.up)("q-header"),y=(0,o.up)("EssentialLink"),v=(0,o.up)("q-list"),_=(0,o.up)("q-scroll-area"),W=(0,o.up)("q-drawer"),T=(0,o.up)("router-view"),L=(0,o.up)("q-page-container"),q=(0,o.up)("q-layout");return(0,o.wg)(),(0,o.j4)(q,{view:"hHh Lpr lFf"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{color:"dark",elevated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{class:"q-pa-xs"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{width:"100%"},modelValue:u.toolbarTabs,"onUpdate:modelValue":t[1]||(t[1]=e=>u.toolbarTabs=e),"outside-arrows":"","mobile-arrows":"",align:"justify",shrink:"","narrow-indicator":"","inline-label":"",dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{icon:"menu",name:"Menu","aria-label":"Menu",onClick:t[0]||(t[0]=e=>u.leftDrawerOpen=!u.leftDrawerOpen)},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[i])),_:1})])),_:1}),(0,o.Wm)(g,{class:"bg-dark-separator",spaced:"xs",inset:"",vertical:""}),(0,o.Wm)(w,{icon:"science",label:"WeShare-Lab",name:"WeShareLab",to:"/","aria-label":"We Share Lab"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[s])),_:1})])),_:1}),(0,o.Wm)(g,{class:"bg-dark-separator",spaced:"xs",inset:"",vertical:""}),(0,o.Wm)(w,{icon:"notifications",name:"Notifications",to:"/notice","aria-label":"Notifications"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[l])),_:1}),(0,o.Wm)(m,{color:"negative",rounded:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(u.notice.length),1)])),_:1})])),_:1}),(0,o.Wm)(g,{class:"bg-dark-separator",spaced:"xs",inset:"",vertical:""}),(0,o.Wm)(w,{icon:"people",name:"People",to:"/people","aria-label":"People"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[c])),_:1})])),_:1}),(0,o.Wm)(g,{class:"bg-dark-separator",spaced:"xs",inset:"",vertical:""}),(0,o.Wm)(w,{icon:"exit_to_app",name:"Logout","aria-label":"Log out",onClick:d.logout},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[r])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{modelValue:u.leftDrawerOpen,"onUpdate:modelValue":t[2]||(t[2]=e=>u.leftDrawerOpen=e),breakpoint:Number.MAX_VALUE,width:210,bordered:"",elevated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{class:"fit"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{separator:"",padding:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.essentialLinks,(e=>((0,o.wg)(),(0,o.j4)(y,(0,o.dG)(e,{key:e.label}),null,16)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue","breakpoint"]),(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T)])),_:1})])),_:1})}a(9665);function u(e,t,a,i,s,l){const c=(0,o.up)("q-icon"),r=(0,o.up)("q-item-section"),p=(0,o.up)("q-item-label"),u=(0,o.up)("q-item"),d=(0,o.up)("q-separator"),h=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.iD)("span",null,[(0,o.wy)(((0,o.wg)(),(0,o.j4)(u,{tag:"label",to:a.to,active:a.active(),onClick:t[0]||(t[0]=e=>a.click())},{default:(0,o.w5)((()=>[a.icon?((0,o.wg)(),(0,o.j4)(r,{key:0,avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{name:a.icon},null,8,["name"])])),_:1})):(0,o.kq)("",!0),a.label||a.caption?((0,o.wg)(),(0,o.j4)(r,{key:1},{default:(0,o.w5)((()=>[a.label?((0,o.wg)(),(0,o.j4)(p,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.label),1)])),_:1})):(0,o.kq)("",!0),a.caption?((0,o.wg)(),(0,o.j4)(p,{key:1,caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.caption),1)])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0)])),_:1},8,["to","active"])),[[h]]),a.separator?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"bg-separator",spaced:"xs",inset:""})):(0,o.kq)("",!0)])}const d={name:"EssentialLink",props:{icon:{type:String,default:""},label:{type:String,default:""},caption:{type:String,default:""},separator:{type:Boolean,default:!0},link:{type:String,default:"#"},to:{type:String,default:""},active:{type:Function,default:()=>!1},click:{type:Function,default:()=>{}}}};var h=a(1639),w=a(490),g=a(1233),m=a(2857),f=a(3115),k=a(926),b=a(1136),y=a(9984),v=a.n(y);const _=(0,h.Z)(d,[["render",u]]),W=_;v()(d,"components",{QItem:w.Z,QItemSection:g.Z,QIcon:m.Z,QItemLabel:f.Z,QSeparator:k.Z}),v()(d,"directives",{Ripple:b.Z});var T=a(3004),L=a(3100),q=a(499);const Z=(e,t)=>e===t,j=e=>{e.leftDrawerOpen=!e.leftDrawerOpen},D=e=>{const t=[{icon:"menu",label:"Menu",active:()=>Z(e.leftDrawerFocus,"Menu"),click:()=>{e.leftDrawerFocus="Menu",j(e)}},{icon:"science",label:"WeShareLab",to:"/",active:()=>Z(e.leftDrawerFocus,"WeShareLab"),click:()=>{e.leftDrawerFocus="WeShareLab",j(e)}},{icon:"notifications",label:"Notifications",to:"/notice",active:()=>Z(e.leftDrawerFocus,"Notifications"),click:()=>{e.leftDrawerFocus="Notifications",j(e)}},{icon:"people",label:"People",to:"/people",active:()=>Z(e.leftDrawerFocus,"People"),click:()=>{e.leftDrawerFocus="People",j(e)}},{icon:"exit_to_app",label:"Logout",separator:!1,active:()=>Z(e.leftDrawerFocus,"Logout"),click:()=>{e.leftDrawerFocus="Logout",j(e),e.logout()}}];return t},S={name:"MainLayout",components:{EssentialLink:W},data(){return{toolbarTabs:(0,q.iH)("WeShareLab"),leftDrawerOpen:!1,leftDrawerFocus:"Menu",essentialLinks:D(this),notice:[],timer:"",maxnoticecount:30}},methods:{...(0,L.OI)(["changeAccessToken","changeRefreshToken"]),async fetchNotice(){this.maxnoticecount-=1;const e=await T.Z.getnotice();401===e.data?this.maxnoticecount=0:this.notice=e.data},fetchNoticeHandler(){this.maxnoticecount>0?this.timer=setInterval(this.fetchNotice,2e3):(clearInterval(this.timer),this.$router.push({path:"/login"}))},logout(){this.changeAccessToken({accessToken:""}),this.changeRefreshToken({refreshToken:""}),clearInterval(this.timer),this.$router.push({path:"/login"})}},mounted(){}};var C=a(249),Q=a(6602),x=a(1663),$=a(7817),F=a(3333),U=a(6858),I=a(990),N=a(906),P=a(6663),A=a(3246),M=a(2133);const O=(0,h.Z)(S,[["render",p]]),V=O;v()(S,"components",{QLayout:C.Z,QHeader:Q.Z,QToolbar:x.Z,QTabs:$.Z,QRouteTab:F.Z,QTooltip:U.Z,QSeparator:k.Z,QBadge:I.Z,QDrawer:N.Z,QScrollArea:P.Z,QList:A.Z,QPageContainer:M.Z})}}]);